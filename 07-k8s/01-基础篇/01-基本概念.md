# k8s简介和基本概念

## 一、k8s是什么？🧐

k8s(Kubernetes简称)是一种可自动实施Linux容器操作的开源平台。

k8s实现了

- 服务发现和负载均衡
- 存储编排
- 自动部署和回滚
- 自动完成装箱计算
- 自我修复
- 密钥与配置管理

它可以帮我们轻松的管理集群，并且这些集群可以跨公有云、私有云或混合云部署主机。

## 二、k8s中的基本概念

Kubernetes中的大部分概念如Node、Pod、ReplicationController、Service等都可以看作一种“资源对象”，几乎所有的资源对象都可以通过Kubernetes提供的kubectl工具（或者API编程调用）执行增、删、改、查等操作并将其保存在etcd中持久化存储。从这个角度来看，Kubernetes其实是一个高度自动化的资源控制系统，它通过跟踪对比etcd库里保存的“资源期望状态”与当前环境中的“实际资源状态”的差异来实现自动控制和自动纠错的高级功能。

### 2.1 Master

Master表示的是集群的控制节点，每个Kubernetes集群中都需要一个Master节点来负责整个集群的管理和控制，基本上Kubernetes所有的控制命令都是发给Master节点，然后由其负责具体的执行。它上面运行着如下几个关键进程：

- Kubernetes API Server（kube-apiserver）：提供了HTTP Rest接口的关键服务进程，Kubernetes中资源对象增删改查的唯一入口，集群控制的入口；
- Kubernetes Controller Manager（kube-controller-manager）：Kubernetes所有资源的自动化控制中心；
- Kubernetes Scheduler（kube-scheduler）：负责资源调度的进程。

在Master节点上通常会启动etcd Server进程，用于保存Kubernetes中所有的资源对象。

如果Master节点宕机或不可用，所有的命令将都会失效。

### 2.2 Node

Kubernetes集群中除Master节点之外的机器都称为Node，Node节点是集群中工作负载节点，每个Node都会被分配一些工作负载，当某个Node宕机时，在该Node上的工作负载会被分配到其他的Node上去。每个Node节点都会运行着以下几个关键进程：

- kubelet：负责Pod对应容器的创建、启停等任务，同时与Master节点密切协作，实现集群管理功能，会定时向Master节点汇报自身的情况；
- kube-proxy：实现Kubernetes Service的通信与负载均衡的重要组件；
- Docker Engine：Docker容器引擎，负责本机的容器创建和管理工作。

### 2.3 Pod

Pod是Kubernetes集群中最重要和最基本的概念，每一个Pod都有一个根容器Pause容器。除了Pause容器之外，每个Pod还包含一个或多个紧密相关的用户业务容器。

Pod使用该组成结构的意义：

- 更容易的判断Pod的状态，使用Pause容器的状态来判断整个容器组的的状态；
- 多个业务容器共享Pause容器的IP，共享Pause容器挂接的Volume，简化业务容器间的通信问题，解决了业务容器间的文件共享问题。

Pod分为两种：普通Pod和静态Pod，静态Pod不会存放在Kubernetes的etcd存储里，而是存放在某个具体的Node上的一个具体文件中，并且只在此Node上运行。普通的Pod将会被自动启停和调度。



















